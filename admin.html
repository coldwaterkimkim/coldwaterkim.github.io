<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Admin — coldwaterkim</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/styles.css">
  <script>
    window.API_BASE = 'https://coldwaterkim.ckstn1112.workers.dev';
  </script>
  <!-- ▼ Markdown 파서 & Sanitizer -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.min.js"></script>
  <script defer src="js/auth.js"></script>
  <script defer src="js/editor.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.min.js"></script>
</head>
<body>
  <center>
    <table width="760" border="1" cellspacing="0" cellpadding="8" bgcolor="#ffffff">
      <tr><td>
        <h1>Admin</h1>
        <div id="loginPanel">
          <h3>Login</h3>
          <form id="loginForm">
            <table>
              <tr><td>Password:</td><td><input type="password" id="password" required></td></tr>
              <tr><td></td><td><button type="submit">Login</button></td></tr>
            </table>
          </form>
          <p class="note">* 편의상 단일 비밀번호. (Cloudflare Worker의 환경변수로 관리)</p>
        </div>

        <div id="editorPanel" style="display:none;">
          <h3>Write Post</h3>
          <form id="postForm">
            <table>
              <tr>
                <td>Title</td>
                <td><input type="text" id="title" required style="width:420px"></td>
              </tr>
              <tr>
                <td>Slug</td>
                <td><input type="text" id="slug" placeholder="자동 생성됨(공백→-)" style="width:420px"></td>
              </tr>
              <tr>
                <td>Date</td>
                <td><input type="date" id="date"></td>
              </tr>
              <tr>
                <td>Mode</td>
                <td>
                  <label><input type="checkbox" id="useMarkdown" checked> Write in Markdown</label>
                </td>
              </tr>
              <tr>
                <td>Content</td>
                <td>
                  <textarea id="content" rows="12" cols="60" placeholder="Markdown 또는 HTML" required></textarea>
                  <div id="preview" class="preview-box"></div>
                </td>
              </tr>
              <tr>
                <td></td>
                <td><button type="submit">Publish</button></td>
              </tr>
            </table>
          </form>
          <div id="result" class="note"></div>
          <p><a href="index.html">← Home</a></p>
        </div>
      </td></tr>
    </table>
  </center>
</body>
</html>
